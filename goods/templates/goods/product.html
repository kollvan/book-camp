{% extends 'base.html' %}
{% load goods_custom_tags %}
{% load static %}
{% block extends_style %}
    <link rel="stylesheet" href="{% static 'bookcamp/css/product.css' %}">
{% endblock %}
{% block section %}
<section class="content">
    <div class="container-image">
        {% if product.image %}
        <img height="500" width="350" title="{{ product.name }}" class="product-image"
             src="{{ product.image.url }}" alt="Image {{ product.name }}">
        {% else %}
        <img height="500" title="{{ product.name }}" class="product-image"
             src="{% static 'bookcamp/image/empty.jpg' %}" alt="Image {{ product.name }}">
        {% endif %}
    </div>
    <div class="container-data">
        <div>
            <div class="container-title">
                <span class="product-title">
                    {{ product.name }}
                </span>
                    {% get_product_status product.pk user.pk as product_status %}
                    {% if user.is_authenticated and product_status is not None %}
                    <div class="card-status {% if product_status is None %}invisible{% endif %}">
                        <select {% if product_status is None %} disabled {% endif %}
                                class="current_status" name="product_status" id="{{product.slug}}-status" >
                            <option value="3" {% if product_status == 3 %} selected {% endif %}>Начато</option>
                            <option value="2" {% if product_status == 2 %} selected {% endif %}>Отложенно</option>
                            <option value="1" {% if product_status == 1 %} selected {% endif %}>Добавленно</option>
                            <option value="0" {% if product_status == 0 %} selected {% endif %}>Прочитанно</option>
                        </select>
                    </div>
                    {% endif %}
            </div>
            <a class="card-author" href="{% url 'goods:catalog' 'all' %}?authors={{product.author.slug}}">Автор: {{product.author}}</a>
            <p>Дата выхода: {{product.year_of_publication}}</p>
            <p>{{ product.description}}</p>
            <p>Количество страниц: {{product.quantity_page}}</p>
            <p>
                Тэги:
            </p>
            <ul class="tag-list">
                {% for tag in product.get_tags %}
                <li class="tag"><a href="{% url 'goods:catalog' 'all' %}?{% append_params tags=tag.slug %}">{{ tag.name }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
</section>
{% endblock %}
{% block footer %}
    <footer>
        <p>&copy;Bookcamp </p>
    </footer>
{% endblock%}
{% block scripts %}
    <script type="text/javascript" src="{% static 'bookcamp/js/script-btns.js'%}"></script>
{% endblock %}