{% extends 'base.html'%}
{% load static %}
{% load inventory_tags %}
{% load goods_custom_tags %}

{% block extends_style %}
<link rel="stylesheet" href="{% static 'bookcamp/css/inventory.css'%}">
<link rel="stylesheet" href="{% static 'bookcamp/css/pagination.css'%}">
{% endblock %}

{% block section %}
<section>
        <div class="inventory-search-container">
            <div>
                <select class="inventory-search" form="filter-form" name="ordering" id="id_ordering">
                    <option value="">-- Сортировка --</option>
                    <option {% if selected_ordering == 'name' %} selected {% endif %} value="name">По названию</option>
                    <option {% if selected_status %}disabled
                            {% elif selected_ordering == 'status'%}
                            selected
                            {% endif %}
                    value="status">По статусу</option>
                    <option {% if selected_ordering == 'author'%} selected {% endif %}value="author">По автору</option>
                </select>
            </div>
            <div>
                <select class="inventory-search" form="filter-form" name="status" id="id_status">
                    <option value="">-- Выберите статус --</option>
                    <option {% if selected_status == '3'%}selected{% endif %} value="3">Начато</option>
                    <option {% if selected_status == '2'%}selected{% endif %} value="2">Отложенно</option>
                    <option {% if selected_status == '1'%}selected{% endif %} value="1">Добавленно</option>
                    <option {% if selected_status == '0'%}selected{% endif %} value="0">Прочитанно</option>
                </select>
            </div>
            <div>
                {% get_available_categories as categories %}
                <select class="inventory-search" form="filter-form" name="category" id="id_category">
                    <option value="">-- Выберите категорию --</option>
                    {% for cat in categories %}
                    <option {% if selected_category == cat.slug%}selected{% endif %} value="{{ cat.slug }}">{{ cat.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="catalog">
            <div class="row">
                {% for item in inventory %}
                <div class="card">
                    {% if item.product.image %}
                    <a href="{% url 'goods:product' item.product.slug %}">
                        <img src="{{ item.product.image.url }}" class="img-card" alt="{{ item.product.name}}">
                    </a>
                    {% endif %}
                    <div>
                        <a class="card-title" href="{% url 'goods:product' item.product.slug %}">{{ item.product.name }}</a>
                        <div class="card-status">
                            {{ item.get_status }}
                        </div>
                        <a class="card-author"
                           href="{% url 'goods:catalog' 'all'%}?authors={{item.product.author.slug}}">
                            Автор: {{ item.product.author }}
                        </a>
                        <p>Дата выхода: {{ item.product.year_of_publication}}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% include 'includes/pagination.html'%}
        </div>
        <div class="filter">
            <form onsubmit="submitForm(event)" id="filter-form" type="get" action="#">
                <div class="container-search">
                    <input placeholder="..." name="q" type="text">
                    <button class="button" type="submit">Поиск</button>
                </div>
                <div>
                    <details>
                        <summary class="inscription">
                            Теги:
                        </summary>
                        {% get_available_tags as tags %}
                        <div class="tags-filter">
                        {% for tag in tags%}
                            <div class="tag">
                                <input type="checkbox" value="{{ tag.slug }}" name="tags" id="id_{{tag.slug}}">
                                <label for="id_{{tag.slug}}">{{tag.name}}</label>
                            </div>
                        {% endfor %}
                        </div>
                    </details>
                    <details class="filter-container">
                        <summary class="inscription">
                            Год издания:
                        </summary>
                        <label for="id_year_publication1">
                            от
                        </label>
                        <input id="id_year_publication1" name="year_from" value="2020" type="number">
                        <label for="id_year_publication2">
                            до
                        </label>
                        <input id="id_year_publication2" name="year_to" value="2025" type="number">
                    </details>
                    <!---->
                    <details open class="filter-container">
                        <summary class="inscription">
                            Авторы:
                        </summary>
                        <ul>
                            {% get_available_authors as authors%}
                            {% for author in authors%}
                            <li class="filter-list">
                                <input value="{{author.slug}}" type="checkbox" name="authors" id="id_{{author.slug}}">
                                <label for="id_{{author.slug}}">{{author.name}}</label>
                            </li>
                            {% endfor %}
                        </ul>
                    </details>
                    <!---->
                    <button class="button" type="submit">Сохранить</button>
                </div>
            </form>
        </div>

    </section>
{% endblock %}

